{% extends "base.html" %}

{% block title %}Debugging Tools - Claude Insight{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2 class="mb-0">
            <i class="fas fa-bug me-2"></i>Advanced Debugging & Troubleshooting Tools
        </h2>
        <p class="text-muted mt-2">Diagnose, debug, and resolve system issues efficiently</p>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="quick-action-card" onclick="showSection('logs')">
            <i class="fas fa-file-alt fa-2x text-primary"></i>
            <h6 class="mt-2">Log Streaming</h6>
            <small class="text-muted">Real-time log viewer</small>
        </div>
    </div>
    <div class="col-md-3">
        <div class="quick-action-card" onclick="showSection('daemons')">
            <i class="fas fa-cogs fa-2x text-success"></i>
            <h6 class="mt-2">Daemon Health</h6>
            <small class="text-muted">Monitor all daemons</small>
        </div>
    </div>
    <div class="col-md-3">
        <div class="quick-action-card" onclick="showSection('performance')">
            <i class="fas fa-tachometer-alt fa-2x text-warning"></i>
            <h6 class="mt-2">Performance</h6>
            <small class="text-muted">Profiling & metrics</small>
        </div>
    </div>
    <div class="col-md-3">
        <div class="quick-action-card" onclick="showSection('errors')">
            <i class="fas fa-exclamation-triangle fa-2x text-danger"></i>
            <h6 class="mt-2">Error Analysis</h6>
            <small class="text-muted">Trace & fix errors</small>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-9">
        <!-- Real-time Log Streaming -->
        <div class="debug-section" id="logsSection">
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-white border-0 pt-4 pb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-stream me-2"></i>Real-time Log Streaming
                        </h5>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-success" onclick="startLogStream()" id="startStreamBtn">
                                <i class="fas fa-play me-1"></i>Start
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="stopLogStream()" id="stopStreamBtn" disabled>
                                <i class="fas fa-stop me-1"></i>Stop
                            </button>
                            <button class="btn btn-sm btn-warning" onclick="clearLogs()">
                                <i class="fas fa-eraser me-1"></i>Clear
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body p-0">
                    <!-- Log Filters -->
                    <div class="log-filters p-3 bg-light border-bottom">
                        <div class="row g-2">
                            <div class="col-md-3">
                                <select class="form-select form-select-sm" id="logLevel">
                                    <option value="all">All Levels</option>
                                    <option value="ERROR">ERROR</option>
                                    <option value="WARN">WARN</option>
                                    <option value="INFO">INFO</option>
                                    <option value="DEBUG">DEBUG</option>
                                </select>
                            </div>
                            <div class="col-md-3">
                                <select class="form-select form-select-sm" id="logSource">
                                    <option value="all">All Sources</option>
                                    <option value="daemon">Daemons</option>
                                    <option value="api">API</option>
                                    <option value="database">Database</option>
                                    <option value="system">System</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <input type="text" class="form-control form-control-sm" id="logSearch" placeholder="Search logs...">
                            </div>
                        </div>
                    </div>

                    <!-- Log Console -->
                    <div class="log-console" id="logConsole">
                        <div class="log-entry log-info">
                            <span class="log-time">00:00:00</span>
                            <span class="log-level-badge badge bg-secondary">INFO</span>
                            <span class="log-message">Waiting for log stream...</span>
                        </div>
                    </div>

                    <!-- Log Stats -->
                    <div class="log-stats p-2 bg-light border-top">
                        <small class="text-muted">
                            <span class="me-3">Total: <strong id="logTotal">0</strong></span>
                            <span class="me-3 text-danger">Errors: <strong id="logErrors">0</strong></span>
                            <span class="me-3 text-warning">Warnings: <strong id="logWarnings">0</strong></span>
                            <span class="text-info">Info: <strong id="logInfo">0</strong></span>
                        </small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Daemon Health Diagnostics -->
        <div class="debug-section" id="daemonsSection" style="display: none;">
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-white border-0 pt-4 pb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-heartbeat me-2"></i>Daemon Health Diagnostics
                        </h5>
                        <button class="btn btn-sm btn-primary" onclick="refreshDaemonHealth()">
                            <i class="fas fa-sync me-1"></i>Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body p-4">
                    <div id="daemonHealthGrid" class="row g-3">
                        <!-- Dynamic daemon cards will be inserted here -->
                        <div class="text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="text-muted mt-2">Loading daemon health...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Profiling -->
        <div class="debug-section" id="performanceSection" style="display: none;">
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-white border-0 pt-4 pb-3">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-line me-2"></i>Performance Profiling
                    </h5>
                </div>
                <div class="card-body p-4">
                    <!-- API Endpoints Performance -->
                    <h6 class="mb-3">API Endpoint Performance</h6>
                    <div class="table-responsive mb-4">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Endpoint</th>
                                    <th>Avg Time (ms)</th>
                                    <th>Calls</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="apiPerformanceTable">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Database Queries -->
                    <h6 class="mb-3">Database Query Performance</h6>
                    <div class="table-responsive mb-4">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Query</th>
                                    <th>Avg Time (ms)</th>
                                    <th>Calls</th>
                                    <th>Impact</th>
                                </tr>
                            </thead>
                            <tbody id="dbPerformanceTable">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Memory Usage -->
                    <h6 class="mb-3">Memory Usage</h6>
                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="memory-card">
                                <small class="text-muted">Heap Used</small>
                                <h4 id="heapUsed">-</h4>
                                <div class="progress mt-2" style="height: 8px;">
                                    <div class="progress-bar" id="heapUsedBar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="memory-card">
                                <small class="text-muted">Heap Total</small>
                                <h4 id="heapTotal">-</h4>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="memory-card">
                                <small class="text-muted">External</small>
                                <h4 id="externalMem">-</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Analysis -->
        <div class="debug-section" id="errorsSection" style="display: none;">
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-white border-0 pt-4 pb-3">
                    <h5 class="mb-0">
                        <i class="fas fa-bug me-2"></i>Error Trace Analyzer
                    </h5>
                </div>
                <div class="card-body p-4">
                    <!-- Error Statistics -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <div class="error-stat-card">
                                <div class="error-stat-icon">
                                    <i class="fas fa-exclamation-circle text-danger"></i>
                                </div>
                                <h3 id="totalErrors">-</h3>
                                <small class="text-muted">Total Errors</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="error-stat-card">
                                <div class="error-stat-icon">
                                    <i class="fas fa-chart-line text-warning"></i>
                                </div>
                                <h3 id="errorTrend">-</h3>
                                <small class="text-muted">24h Trend</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="error-stat-card">
                                <div class="error-stat-icon">
                                    <i class="fas fa-check-circle text-success"></i>
                                </div>
                                <h3 id="resolvedErrors">-</h3>
                                <small class="text-muted">Auto-Resolved</small>
                            </div>
                        </div>
                    </div>

                    <!-- Error Types -->
                    <h6 class="mb-3">Error Types & Patterns</h6>
                    <div class="table-responsive mb-4">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Error Type</th>
                                    <th>Count</th>
                                    <th>Trend</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="errorTypesTable">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Quick Fix Suggestions -->
                    <h6 class="mb-3">AI-Powered Quick Fix Suggestions</h6>
                    <div id="quickFixSuggestions">
                        <!-- Dynamic suggestions -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar: Tools & Actions -->
    <div class="col-lg-3">
        <!-- System Snapshot -->
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-white border-0 pt-4 pb-3">
                <h6 class="mb-0">
                    <i class="fas fa-camera me-2"></i>System Snapshot
                </h6>
            </div>
            <div class="card-body p-3">
                <p class="small text-muted">Capture current system state for debugging</p>
                <button class="btn btn-sm btn-primary w-100" onclick="createSnapshot()">
                    <i class="fas fa-camera me-1"></i>Create Snapshot
                </button>
                <hr>
                <div id="snapshotsList">
                    <small class="text-muted">No snapshots yet</small>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card border-0 shadow-sm mb-4">
            <div class="card-header bg-white border-0 pt-4 pb-3">
                <h6 class="mb-0">
                    <i class="fas fa-bolt me-2"></i>Quick Actions
                </h6>
            </div>
            <div class="card-body p-3">
                <div class="d-grid gap-2">
                    <button class="btn btn-sm btn-outline-primary" onclick="runHealthCheck()">
                        <i class="fas fa-heartbeat me-1"></i>Run Health Check
                    </button>
                    <button class="btn btn-sm btn-outline-success" onclick="restartDaemons()">
                        <i class="fas fa-sync me-1"></i>Restart All Daemons
                    </button>
                    <button class="btn btn-sm btn-outline-warning" onclick="clearCache()">
                        <i class="fas fa-eraser me-1"></i>Clear Cache
                    </button>
                    <button class="btn btn-sm btn-outline-danger" onclick="emergencyShutdown()">
                        <i class="fas fa-power-off me-1"></i>Emergency Shutdown
                    </button>
                </div>
            </div>
        </div>

        <!-- Debug Mode -->
        <div class="card border-0 shadow-sm">
            <div class="card-header bg-white border-0 pt-4 pb-3">
                <h6 class="mb-0">
                    <i class="fas fa-wrench me-2"></i>Debug Mode
                </h6>
            </div>
            <div class="card-body p-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="debugModeToggle" onchange="toggleDebugMode()">
                    <label class="form-check-label" for="debugModeToggle">
                        Enable Debug Mode
                    </label>
                </div>
                <small class="text-muted d-block mt-2">
                    Shows detailed logs and stack traces
                </small>
            </div>
        </div>
    </div>
</div>

<script>
// Debugging Tools JavaScript
let logStream = null;
let logStreamActive = false;
let logCount = { total: 0, errors: 0, warnings: 0, info: 0 };

// Section navigation
function showSection(section) {
    // Hide all sections
    document.querySelectorAll('.debug-section').forEach(el => el.style.display = 'none');

    // Show selected section
    document.getElementById(`${section}Section`).style.display = 'block';

    // Highlight active card
    document.querySelectorAll('.quick-action-card').forEach(card => card.classList.remove('active'));
    event.currentTarget.classList.add('active');

    // Load section data
    if (section === 'daemons') {
        loadDaemonHealth();
    } else if (section === 'performance') {
        loadPerformanceData();
    } else if (section === 'errors') {
        loadErrorAnalysis();
    }
}

// Log Streaming
function startLogStream() {
    logStreamActive = true;
    document.getElementById('startStreamBtn').disabled = true;
    document.getElementById('stopStreamBtn').disabled = false;

    // Simulate log streaming
    logStream = setInterval(() => {
        if (!logStreamActive) return;

        const levels = ['INFO', 'WARN', 'ERROR', 'DEBUG'];
        const messages = [
            'Processing request from client',
            'Database query executed successfully',
            'Cache miss for key: user_123',
            'Session expired for user',
            'Network request failed - retrying',
            'Background job completed'
        ];

        const level = levels[Math.floor(Math.random() * levels.length)];
        const message = messages[Math.floor(Math.random() * messages.length)];

        addLogEntry(level, message);
    }, 1000);
}

function stopLogStream() {
    logStreamActive = false;
    clearInterval(logStream);
    document.getElementById('startStreamBtn').disabled = false;
    document.getElementById('stopStreamBtn').disabled = true;
}

function addLogEntry(level, message) {
    const console = document.getElementById('logConsole');
    const time = new Date().toLocaleTimeString();

    const entry = document.createElement('div');
    entry.className = `log-entry log-${level.toLowerCase()}`;

    const levelColors = {
        'ERROR': 'danger',
        'WARN': 'warning',
        'INFO': 'info',
        'DEBUG': 'secondary'
    };

    entry.innerHTML = `
        <span class="log-time">${time}</span>
        <span class="log-level-badge badge bg-${levelColors[level]}">${level}</span>
        <span class="log-message">${message}</span>
    `;

    console.appendChild(entry);

    // Auto-scroll
    console.scrollTop = console.scrollHeight;

    // Update counts
    logCount.total++;
    if (level === 'ERROR') logCount.errors++;
    if (level === 'WARN') logCount.warnings++;
    if (level === 'INFO') logCount.info++;

    document.getElementById('logTotal').textContent = logCount.total;
    document.getElementById('logErrors').textContent = logCount.errors;
    document.getElementById('logWarnings').textContent = logCount.warnings;
    document.getElementById('logInfo').textContent = logCount.info;

    // Keep only last 100 entries
    while (console.children.length > 100) {
        console.removeChild(console.firstChild);
    }
}

function clearLogs() {
    document.getElementById('logConsole').innerHTML = `
        <div class="log-entry log-info">
            <span class="log-time">00:00:00</span>
            <span class="log-level-badge badge bg-secondary">INFO</span>
            <span class="log-message">Logs cleared</span>
        </div>
    `;
    logCount = { total: 0, errors: 0, warnings: 0, info: 0 };
    document.getElementById('logTotal').textContent = '0';
    document.getElementById('logErrors').textContent = '0';
    document.getElementById('logWarnings').textContent = '0';
    document.getElementById('logInfo').textContent = '0';
}

// Daemon Health
function loadDaemonHealth() {
    fetch('/api/debug/daemons/health')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayDaemonHealth(data.daemons);
            }
        });
}

function displayDaemonHealth(daemons) {
    const grid = document.getElementById('daemonHealthGrid');
    grid.innerHTML = '';

    for (const [name, info] of Object.entries(daemons)) {
        const statusClass = info.status === 'running' ? 'success' : 'danger';
        const statusIcon = info.status === 'running' ? 'check-circle' : 'times-circle';

        const card = `
            <div class="col-md-6">
                <div class="daemon-card">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="mb-1">
                                <i class="fas fa-${statusIcon} text-${statusClass} me-2"></i>
                                ${name}
                            </h6>
                            <small class="text-muted">PID: ${info.pid || 'N/A'}</small>
                        </div>
                        <span class="badge bg-${statusClass}">${info.status}</span>
                    </div>
                    <div class="daemon-stats mt-3">
                        <div class="row g-2">
                            <div class="col-4">
                                <small class="text-muted d-block">CPU</small>
                                <strong>${info.cpu_usage || 'N/A'}</strong>
                            </div>
                            <div class="col-4">
                                <small class="text-muted d-block">Memory</small>
                                <strong>${info.memory_usage || 'N/A'}</strong>
                            </div>
                            <div class="col-4">
                                <small class="text-muted d-block">Uptime</small>
                                <strong>${info.uptime || 'N/A'}</strong>
                            </div>
                        </div>
                    </div>
                    <div class="daemon-actions mt-2">
                        <button class="btn btn-sm btn-outline-primary" onclick="restartDaemon('${name}')">
                            <i class="fas fa-sync"></i> Restart
                        </button>
                        <button class="btn btn-sm btn-outline-info" onclick="viewDaemonLogs('${name}')">
                            <i class="fas fa-file-alt"></i> Logs
                        </button>
                    </div>
                </div>
            </div>
        `;

        grid.innerHTML += card;
    }
}

function refreshDaemonHealth() {
    document.getElementById('daemonHealthGrid').innerHTML = `
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="text-muted mt-2">Refreshing daemon health...</p>
        </div>
    `;
    setTimeout(loadDaemonHealth, 1000);
}

function restartDaemon(name) {
    if (confirm(`Restart daemon: ${name}?`)) {
        alert(`Restarting ${name}...`);
    }
}

function viewDaemonLogs(name) {
    alert(`Viewing logs for: ${name}`);
}

// Performance Profiling
function loadPerformanceData() {
    fetch('/api/debug/performance/profile')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayPerformanceData(data.profile);
            }
        });
}

function displayPerformanceData(profile) {
    // API Endpoints
    const apiTable = document.getElementById('apiPerformanceTable');
    apiTable.innerHTML = profile.api_endpoints.map(endpoint => {
        const status = endpoint.avg_time < 100 ? 'success' : endpoint.avg_time < 200 ? 'warning' : 'danger';
        return `
            <tr>
                <td><code>${endpoint.endpoint}</code></td>
                <td>${endpoint.avg_time}ms</td>
                <td>${endpoint.calls.toLocaleString()}</td>
                <td><span class="badge bg-${status}">${status}</span></td>
            </tr>
        `;
    }).join('');

    // Database Queries
    const dbTable = document.getElementById('dbPerformanceTable');
    dbTable.innerHTML = profile.database_queries.map(query => {
        const impact = query.avg_time * query.calls;
        const impactLevel = impact < 10000 ? 'low' : impact < 50000 ? 'medium' : 'high';
        return `
            <tr>
                <td><code>${query.query.substring(0, 50)}...</code></td>
                <td>${query.avg_time}ms</td>
                <td>${query.calls.toLocaleString()}</td>
                <td><span class="badge bg-info">${impactLevel}</span></td>
            </tr>
        `;
    }).join('');

    // Memory
    document.getElementById('heapUsed').textContent = profile.memory.heap_used;
    document.getElementById('heapTotal').textContent = profile.memory.heap_total;
    document.getElementById('externalMem').textContent = profile.memory.external;

    // Calculate heap percentage
    const heapPercent = (256 / 512) * 100;
    document.getElementById('heapUsedBar').style.width = `${heapPercent}%`;
    document.getElementById('heapUsedBar').className = `progress-bar ${heapPercent > 80 ? 'bg-danger' : heapPercent > 60 ? 'bg-warning' : 'bg-success'}`;
}

// Error Analysis
function loadErrorAnalysis() {
    fetch('/api/debug/errors/analyze')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                displayErrorAnalysis(data.analysis);
            }
        });
}

function displayErrorAnalysis(analysis) {
    document.getElementById('totalErrors').textContent = analysis.total_errors;
    document.getElementById('errorTrend').textContent = '+12%';
    document.getElementById('resolvedErrors').textContent = '15';

    // Error Types
    const table = document.getElementById('errorTypesTable');
    table.innerHTML = analysis.error_types.map(error => {
        const trendIcon = error.trend === 'increasing' ? 'arrow-up text-danger' :
                         error.trend === 'decreasing' ? 'arrow-down text-success' :
                         'minus text-muted';
        return `
            <tr>
                <td><strong>${error.type}</strong></td>
                <td>${error.count}</td>
                <td><i class="fas fa-${trendIcon}"></i> ${error.trend}</td>
                <td>
                    <button class="btn btn-sm btn-primary" onclick="viewErrorDetails('${error.type}')">
                        <i class="fas fa-eye"></i> View
                    </button>
                </td>
            </tr>
        `;
    }).join('');

    // Quick Fix Suggestions
    const suggestions = document.getElementById('quickFixSuggestions');
    suggestions.innerHTML = analysis.suggestions.map((suggestion, i) => `
        <div class="alert alert-info d-flex justify-content-between align-items-center">
            <div>
                <i class="fas fa-lightbulb me-2"></i>
                <strong>Suggestion ${i + 1}:</strong> ${suggestion}
            </div>
            <button class="btn btn-sm btn-primary" onclick="applyQuickFix(${i})">
                <i class="fas fa-magic me-1"></i>Apply
            </button>
        </div>
    `).join('');
}

function viewErrorDetails(type) {
    alert(`Viewing details for: ${type}`);
}

function applyQuickFix(index) {
    if (confirm('Apply this quick fix?')) {
        alert('Quick fix applied successfully!');
    }
}

// System Actions
function createSnapshot() {
    fetch('/api/debug/system/snapshot', { method: 'POST' })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(`Snapshot created: ${data.snapshot_id}`);
                const list = document.getElementById('snapshotsList');
                list.innerHTML += `
                    <div class="snapshot-item">
                        <small><i class="fas fa-camera me-1"></i>${data.snapshot_id}</small>
                    </div>
                `;
            }
        });
}

function runHealthCheck() {
    alert('Running comprehensive health check...');
}

function restartDaemons() {
    if (confirm('Restart all daemons? This may cause temporary service interruption.')) {
        alert('Restarting all daemons...');
    }
}

function clearCache() {
    if (confirm('Clear all caches?')) {
        alert('Cache cleared successfully!');
    }
}

function emergencyShutdown() {
    if (confirm('⚠️ EMERGENCY SHUTDOWN\n\nThis will stop all services immediately. Are you sure?')) {
        alert('Emergency shutdown initiated...');
    }
}

function toggleDebugMode() {
    const enabled = document.getElementById('debugModeToggle').checked;
    alert(enabled ? 'Debug mode enabled' : 'Debug mode disabled');
}

// Auto-load first section on page load
document.addEventListener('DOMContentLoaded', function() {
    showSection('logs');
});

</script>

<style>
.quick-action-card {
    background: white;
    border: 2px solid #dee2e6;
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    height: 100%;
}

.quick-action-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    border-color: #667eea;
}

.quick-action-card.active {
    border-color: #667eea;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
}

/* Log Console */
.log-console {
    background: #1e1e1e;
    color: #00ff00;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
    height: 400px;
    overflow-y: auto;
    padding: 1rem;
}

.log-entry {
    padding: 0.25rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.log-time {
    color: #888;
    margin-right: 0.5rem;
}

.log-level-badge {
    margin-right: 0.5rem;
}

.log-message {
    font-weight: 500;
}

.log-entry.log-error {
    color: #ff6b6b;
}

.log-entry.log-warn {
    color: #ffd93d;
}

.log-entry.log-info {
    color: #00ff00;
}

.log-entry.log-debug {
    color: #888;
}

/* Daemon Cards */
.daemon-card {
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 1rem;
    transition: all 0.3s;
}

.daemon-card:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.daemon-stats {
    background: #f8f9fa;
    border-radius: 6px;
    padding: 0.5rem;
}

.daemon-actions {
    display: flex;
    gap: 0.5rem;
}

/* Memory Cards */
.memory-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
}

/* Error Stats */
.error-stat-card {
    background: white;
    border: 2px solid #dee2e6;
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    transition: all 0.3s;
}

.error-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
}

.error-stat-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.snapshot-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid #dee2e6;
}

.snapshot-item:last-child {
    border-bottom: none;
}
</style>

{% endblock %}
